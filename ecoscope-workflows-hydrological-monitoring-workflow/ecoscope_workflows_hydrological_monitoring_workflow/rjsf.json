{
  "properties": {
    "workflow_details": {
      "additionalProperties": false,
      "properties": {
        "name": {
          "title": "Workflow Name",
          "type": "string"
        },
        "description": {
          "default": "",
          "title": "Workflow Description",
          "type": "string"
        }
      },
      "required": [
        "name"
      ],
      "type": "object",
      "description": "Add information that will help to differentiate this workflow from another.",
      "title": "Set Workflow Details"
    },
    "time_range": {
      "additionalProperties": false,
      "properties": {
        "since": {
          "format": "date-time",
          "title": "Since",
          "type": "string",
          "description": "The start time"
        },
        "until": {
          "format": "date-time",
          "title": "Until",
          "type": "string",
          "description": "The end time"
        },
        "timezone": {
          "allOf": [
            {
              "$ref": "#/$defs/TimezoneInfo"
            }
          ],
          "default": null,
          "title": "Timezone"
        }
      },
      "required": [
        "since",
        "until"
      ],
      "type": "object",
      "description": "Choose the period of time to analyze.",
      "title": "Time Range"
    },
    "er_client_name": {
      "additionalProperties": false,
      "properties": {
        "data_source": {
          "$ref": "#/$defs/EarthRangerConnection",
          "title": "",
          "description": "Select one of your configured data sources."
        }
      },
      "required": [
        "data_source"
      ],
      "type": "object",
      "title": "Select EarthRanger Data Source"
    },
    "subject_obs_stevens": {
      "additionalProperties": false,
      "properties": {
        "subject_group_name": {
          "title": "Subject Group Name",
          "type": "string",
          "description": "\u26a0\ufe0f The use of a group with mixed subtypes could lead to unexpected results"
        }
      },
      "required": [
        "subject_group_name"
      ],
      "type": "object",
      "title": "Get Subject Group Observations from EarthRanger"
    },
    "groupers": {
      "additionalProperties": false,
      "properties": {
        "groupers": {
          "default": null,
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/ValueGrouper"
              },
              {
                "$ref": "#/$defs/TemporalGrouper"
              },
              {
                "$ref": "#/$defs/SpatialGrouper"
              }
            ],
            "title": "Group by"
          },
          "title": " ",
          "type": "array",
          "description": "            Specify how the data should be grouped to create the views for your dashboard.\n            This field is optional; if left blank, all the data will appear in a single view.\n            "
        }
      },
      "type": "object",
      "required": [],
      "title": "Set Groupers for Analysis"
    },
    "persist_stevens_observations": {
      "additionalProperties": false,
      "properties": {
        "filetypes": {
          "default": [
            "csv"
          ],
          "items": {
            "enum": [
              "csv",
              "gpkg",
              "geoparquet"
            ],
            "type": "string"
          },
          "title": "Filetypes",
          "type": "array",
          "description": "The output format",
          "uniqueItems": true
        },
        "filename_prefix": {
          "default": "observations",
          "title": "Filename Prefix",
          "type": "string",
          "description": "            Optional filename prefix to persist text to within the `root_path`.\n            We will always add a suffix based on the dataframe content hash to avoid duplicates.\n            ",
          "ecoscope:advanced": true
        }
      },
      "required": [],
      "type": "object",
      "title": "Persist Observations"
    },
    "persist_daily_summary_stevens": {
      "additionalProperties": false,
      "properties": {
        "filename_prefix": {
          "default": "daily_summary",
          "title": "Filename Prefix",
          "type": "string",
          "description": "            Optional filename prefix to persist text to within the `root_path`.\n            We will always add a suffix based on the dataframe content hash to avoid duplicates.\n            ",
          "ecoscope:advanced": true
        }
      },
      "required": [],
      "type": "object",
      "title": "Persist Daily Summary"
    },
    "draw_summary_table": {
      "additionalProperties": false,
      "properties": {
        "columns": {
          "default": null,
          "items": {
            "type": "string"
          },
          "title": "Columns",
          "type": "array",
          "description": "The list of dataframe columns to render in the table. Leave empty to render all columns",
          "ecoscope:advanced": true
        },
        "table_config": {
          "allOf": [
            {
              "$ref": "#/$defs/TableConfig"
            }
          ],
          "default": null,
          "title": "Table Config",
          "description": "Configuration options for the table.",
          "ecoscope:advanced": true
        }
      },
      "required": [],
      "type": "object",
      "title": "Draw Summary Table"
    },
    "create_hydrological_report": {
      "additionalProperties": false,
      "properties": {
        "template_path": {
          "title": "Template Path",
          "type": "string",
          "description": "Path or URL to the Word template (.docx) file with Jinja2 placeholders. Supports local paths and remote URLs (http://, https://).",
          "default": "https://github.com/wildlife-dynamics/wt-hydrological-monitoring/raw/refs/heads/main/resources/templates/hydrology_template.docx"
        }
      },
      "required": [
        "template_path"
      ],
      "type": "object",
      "title": "Create Hydrological Report"
    }
  },
  "$defs": {
    "TimezoneInfo": {
      "properties": {
        "label": {
          "title": "Label",
          "type": "string"
        },
        "tzCode": {
          "title": "Tzcode",
          "type": "string"
        },
        "name": {
          "title": "Name",
          "type": "string"
        },
        "utc": {
          "title": "Utc",
          "type": "string"
        }
      },
      "required": [
        "label",
        "tzCode",
        "name",
        "utc"
      ],
      "title": "TimezoneInfo",
      "type": "object"
    },
    "EarthRangerConnection": {
      "properties": {
        "name": {
          "title": "Data Source",
          "type": "string"
        }
      },
      "required": [
        "name"
      ],
      "title": "EarthRangerConnection",
      "type": "object"
    },
    "SpatialGrouper": {
      "properties": {
        "spatial_index_name": {
          "title": "Spatial Regions",
          "type": "string"
        }
      },
      "required": [
        "spatial_index_name"
      ],
      "title": "Spatial",
      "type": "object"
    },
    "TemporalGrouper": {
      "properties": {
        "temporal_index": {
          "oneOf": [
            {
              "const": "%Y",
              "title": "Year (example: 2024)"
            },
            {
              "const": "%B",
              "title": "Month (example: September)"
            },
            {
              "const": "%Y-%m",
              "title": "Year and Month (example: 2023-01)"
            },
            {
              "const": "%j",
              "title": "Day of the year as a number (example: 365)"
            },
            {
              "const": "%d",
              "title": "Day of the month as a number (example: 31)"
            },
            {
              "const": "%A",
              "title": "Day of the week (example: Sunday)"
            },
            {
              "const": "%H",
              "title": "Hour (24-hour clock) as number (example: 22)"
            },
            {
              "const": "%Y-%m-%d",
              "title": "Date (example: 2025-01-31)"
            }
          ],
          "title": "Time",
          "type": "string"
        }
      },
      "required": [
        "temporal_index"
      ],
      "title": "Time",
      "type": "object"
    },
    "ValueGrouper": {
      "properties": {
        "index_name": {
          "oneOf": [],
          "title": "Category",
          "type": "string"
        }
      },
      "required": [
        "index_name"
      ],
      "title": "Category",
      "type": "object",
      "oneOf": [
        {
          "const": "weather_station",
          "title": "Weather Station"
        }
      ]
    },
    "TableConfig": {
      "properties": {
        "enable_sorting": {
          "default": true,
          "title": "Enable Sorting",
          "type": "boolean"
        },
        "enable_filtering": {
          "default": false,
          "title": "Enable Filtering",
          "type": "boolean"
        },
        "enable_download": {
          "default": false,
          "title": "Enable Download",
          "type": "boolean"
        },
        "hide_header": {
          "default": false,
          "title": "Hide Header",
          "type": "boolean"
        }
      },
      "title": "TableConfig",
      "type": "object"
    }
  },
  "uiSchema": {
    "workflow_details": {
      "ui:order": [
        "name",
        "description"
      ]
    },
    "time_range": {
      "ui:order": [
        "since",
        "until",
        "timezone"
      ]
    },
    "persist_stevens_observations": {
      "ui:order": [
        "filetypes",
        "filename_prefix"
      ]
    },
    "draw_summary_table": {
      "ui:order": [
        "columns",
        "table_config"
      ]
    },
    "ui:order": [
      "workflow_details",
      "time_range",
      "er_client_name",
      "subject_obs_stevens",
      "groupers",
      "persist_stevens_observations",
      "persist_daily_summary_stevens",
      "draw_summary_table",
      "create_hydrological_report"
    ]
  },
  "additionalProperties": false
}
